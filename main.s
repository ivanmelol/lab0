;hEsto es un comentario
.global _main ;INICIO 
;dentro del main establecer la configuracion
        
_main:
        BCLR    TRISB, #0XA ;(configuracion) LIMPIAR EL BIT 10 DEL REGISTRO TRISB PARA CONFIGURARLO COMO SALIDA
        BCLR    TRISB, #0XB ;(configuracion)  LIMPIAR EL BIT 11 DEL REGSITRO TRISB PARA CONFIGURARLO COMO SALIDA       
        BCLR    TRISB, #0XF ; pin rb15
        BCLR    TRISB, #0XC ; PIN RB12
        MOV        #0X000, W0  ; MOVER EL VALOR 0 AL REGSITRO DE TABAJO W0 W0=0 
        MOV        W0, PORTB   ; MOVER EL VALOR QUE ESTA EN W0 (0) AL REGISTRO PORTB PARA COLOCAR TODOS LOS PINES DEL PUERTO B EN 0V

 

_bucle:  ; ETIQUETA PARA EL SALTO DEL BUCLE
        BSET    LATB, #0xA  ;PONER EL BIT 10 DEL REGSITRO LATB EN 1 -> 3.3v
        BSET    LATB, #0xB  ;PONER EL BIT 11 DEL REGSITRO LATB EN 1 -> 3.3v 
        CALL    DELAY1S ; LLAMAR A LA SUBRUTINA DELAY1S
        CALL    DELAY1S ; LLAMAR A LA SUBRUTINA DELAY1S
        BCLR    LATB, #0xA  ;PONER EL BIT 10 DEL REGSITRO LATB EN 0 -> 0v
        BCLR    LATB, #0XB  ;PONER EL BIT 10 DEL REGSITRO LATB EN 0 -> 0v
        CALL    DELAY1S
        CALL    DELAY1S ; LLAMAR A LA SUBRUTINA DELAY1S
        GOTO    _bucle ; SALTAR A LA ETIQUETA BUCLE
        
        
DELAY1S:
        MOV        #1000,W0 ;MOVIENDO EL NUMERO 1000 A W0
REPETIR:    ;ETIQUETA PARA UN BUCLE INTERNO
        DEC        W0, W1 ; A W0 LE RESTA 1, Y EL RESULTADO LO GUARDA W0
        MOV        W1, W0 ; MOVER EL RESULTADO DE LA RESTA A W0
        BRA        Z, RETORNAR ; SI LA RESTA ES IGUAL A 0 SALTA RETORNAR
        REPEAT  #5000 ;REPITE 5000 VECES LA PROXIMA INSTRUCCION 
        NOP        ;NO HACE NADA PERO GASTA CICLOS DE RELOJ 5000 CICLOS DE RELOJ 5000X500        
        GOTO    REPETIR ;SALTAR A LA ETIQUETA _REPETIR
RETORNAR:
        RETURN 
        